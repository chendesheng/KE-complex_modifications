{
  "title": "Personal rules (@chendesheng)",
  "rules": [
    {
      "description": "Microsoft Remote Desktop",
      "manipulators": [
        {
          "from": <%= from("right_shift", [], ["any"]) %>,
          "to": <%= to([["right_shift"]]) %>,
          "to_if_alone": <%= to([["left_shift", ["left_option"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ],
          "type": "basic"
        },
        {
          "type": "basic",
          "from": <%= from("c", ["left_command"], []) %>,
          "to": <%= to([["c", ["left_control"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("v", ["left_command"], []) %>,
          "to": <%= to([["v", ["left_control"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("s", ["left_command"], []) %>,
          "to": <%= to([["s", ["left_control"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("a", ["left_command"], []) %>,
          "to": <%= to([["a", ["left_control"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("z", ["left_command"], []) %>,
          "to": <%= to([["z", ["left_control"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("f", ["left_command"], []) %>,
          "to": <%= to([["f", ["left_control"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("x", ["left_command"], []) %>,
          "to": <%= to([["x", ["left_control"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("t", ["left_command"], []) %>,
          "to": <%= to([["t", ["left_control"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("w", ["left_command"], []) %>,
          "to": <%= to([["w", ["left_control"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("tab", ["left_command"], []) %>,
          "to": <%= to([["tab", ["left_option"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("tab", ["left_command", "left_shift"], []) %>,
          "to": <%= to([["tab", ["left_option", "left_shift"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("f", ["left_command", "left_shift"], []) %>,
          "to": <%= to([["f", ["left_control", "left_shift"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        }
      ]
    },
    {
      "description": "Microsoft Remote Desktop and Visual Studio",
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("p", ["left_command"], []) %>,
          "to": <%= to([["comma", ["left_control"]]]) %>,
          "conditions": [
              <%= frontmost_application_if(["remote_desktop"]) %>
          ]
        }
      ]
    },
    {
      "description": "Launch shcreenshot.app and downsize the image in clipboard with pbresize (https://github.com/chongkim/pbresize)",
      "manipulators": [
        {
          "from": <%= from("print_screen", [], []) %>,
          "to": <%= to_app("screenshot.app && pbresize") %>,
          "type": "basic"
        },
        {
          "from": <%= from("4", ["left_shift", "left_command"], []) %>,
          "to": <%= to_app("screenshot.app") %>,
          "type": "basic"
        }
      ]
    },
    {
      "description": "map right_shift to select next input source (need put this rule after the remote desktop rules)",
      "manipulators": [
        {
          "from": <%= from("right_shift", [], ["any"]) %>,
          "to": <%= to([["right_shift"]]) %>,
          "to_if_alone": <%= to([["spacebar", ["left_command", "left_shift"]]]) %>,
          "type": "basic"
        }
      ]
    },
    {
      "description": "This is for typing password by touchid, you need prepair 3 things: 1) install sudo-touchid so that you can use touch id grant sudo 2) create a file has the same permission setting as '/etc/sudoers' which require sudo to read so that it is safe to put clear password in it 3) An apple script to read from the file and send as keystrokes (The script itself could be sudo protected as well)",
      "manipulators": [
        {
          "from": <%= from("c", ["fn"], []) %>,
          "to": <%= to_shell_command(["sudo -k osascript -l JavaScript /Users/chendesheng/.fill.js comm100randd return"]) %>,
          "type": "basic"
        },
        {
          "from": <%= from("m", ["fn"], []) %>,
          "to": <%= to_shell_command(["sudo -k osascript -l JavaScript /Users/chendesheng/.fill.js me"]) %>,
          "type": "basic"
        }
      ]
    }
  ]
}